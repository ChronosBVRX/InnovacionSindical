<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Plataforma Sindical CG — Calculadoras CCT</title>
  <link rel="icon" href="https://raw.githubusercontent.com/ChronosBVRX/InnovacionSindical/refs/heads/main/Logo%20SNTSS.jpeg">

  <style>
    :root{
      --bg:#1b2e45;
      --panel:#263e5c;
      --txt:#f0fdfa;
      --muted:#b0bec5;
      --primary:#4da1a8;
      --accent:#fdd835; /* Amarillo para notas técnicas */
      --shadow: 0 10px 30px rgba(0,0,0,.3);
    }
    *{box-sizing:border-box;margin:0;padding:0;font-family:system-ui, -apple-system, sans-serif}

    body{
      min-height:100vh;
      color:var(--txt);
      background: var(--bg);
      padding: 20px;
    }

    .wrap{max-width:1100px;margin:0 auto}

    /* --- Header --- */
    .topbar{
      background: var(--panel);
      padding: 15px 20px;
      border-radius: 12px;
      display:flex; align-items:center; gap:15px;
      margin-bottom: 20px;
      box-shadow: var(--shadow);
      border-bottom: 2px solid var(--primary);
    }
    .logo{
      width:45px; height:45px; background:var(--primary);
      color:#0f1a26; font-weight:900; display:grid; place-items:center;
      border-radius:8px; font-size:18px;
    }
    .title h1{font-size:18px;}
    .title span{font-size:13px; color:var(--muted);}

    /* --- Layout --- */
    .layout{
      display:grid; grid-template-columns: 260px 1fr; gap:20px;
    }
    @media(max-width:800px){ .layout{grid-template-columns:1fr} }

    /* --- Sidebar --- */
    .sidebar{display:flex; flex-direction:column; gap:8px;}
    .nav-btn{
      background: rgba(255,255,255,.05);
      border:none; color:var(--muted);
      padding: 14px; border-radius:10px;
      text-align:left; cursor:pointer;
      transition: .2s;
      display:flex; align-items:center; gap:10px;
    }
    .nav-btn:hover{background:rgba(255,255,255,.1); color:#fff}
    .nav-btn.active{
      background: var(--primary); color:#081b2b; font-weight:700;
      box-shadow: 0 4px 12px rgba(77,161,168,.4);
    }
    .badge{
      font-size:11px; padding:2px 6px; border-radius:4px;
      background:rgba(0,0,0,.2); margin-left:auto;
    }

    /* --- Main Content --- */
    .calc-box{
      background: var(--panel);
      padding: 25px; border-radius:16px;
      box-shadow: var(--shadow);
      animation: fadeIn .3s ease;
    }
    @keyframes fadeIn{from{opacity:0;transform:translateY(5px)}to{opacity:1;transform:translateY(0)}}
    
    .hide{display:none}

    h2{margin-bottom:10px; color:var(--primary)}
    .desc{color:var(--muted); font-size:14px; margin-bottom:20px; border-bottom:1px solid rgba(255,255,255,.1); padding-bottom:15px}

    /* Form Grid */
    .form-grid{display:grid; grid-template-columns: 1fr 1fr; gap:15px; margin-bottom:20px}
    @media(max-width:600px){.form-grid{grid-template-columns:1fr}}

    .field{display:flex; flex-direction:column; gap:5px}
    label{font-size:12px; font-weight:bold; color:#fff}
    input, select{
      padding: 12px; background: rgba(0,0,0,.2);
      border: 1px solid rgba(255,255,255,.1);
      border-radius:8px; color:#fff; outline:none;
      font-size:15px;
    }
    input:focus, select:focus{border-color:var(--primary)}
    small{font-size:11px; color:var(--muted)}

    /* Tech Card (Fórmulas visibles) */
    .tech-card{
      background: rgba(0,0,0,.2);
      border-left: 4px solid var(--accent);
      padding: 15px; border-radius: 0 8px 8px 0;
      margin-bottom: 20px;
    }
    .tech-title{color:var(--accent); font-size:12px; font-weight:800; text-transform:uppercase; letter-spacing:1px; margin-bottom:5px}
    .tech-content{font-size:13px; line-height:1.5; color:#cfd8dc}

    /* Actions & Results */
    .btn-calc{
      width:100%; padding: 14px;
      background: linear-gradient(135deg, var(--primary), #2e6a70);
      border:none; border-radius:8px;
      color:#fff; font-weight:800; font-size:16px;
      cursor:pointer; transition:.2s;
    }
    .btn-calc:hover{transform:translateY(-2px); box-shadow:0 5px 15px rgba(77,161,168,.3)}

    .result-area{
      margin-top: 20px;
      background: rgba(77,161,168,.1);
      border: 1px solid rgba(77,161,168,.3);
      border-radius: 12px; overflow:hidden;
    }
    .res-row{
      display:flex; justify-content:space-between; align-items:center;
      padding: 12px 15px; border-bottom:1px solid rgba(77,161,168,.1);
    }
    .res-row:last-child{border-bottom:none; background:rgba(77,161,168,.2)}
    .res-lbl{font-size:13px;}
    .res-val{font-size:16px; font-weight:700; font-family:monospace}
    .concept-tag{
      display:inline-block; font-size:10px; padding:2px 5px; 
      background:var(--primary); color:#000; border-radius:3px; margin-right:5px; font-weight:bold;
    }

  </style>
</head>
<body>

<div class="wrap">
  <div class="topbar">
    <div class="logo">CG</div>
    <div class="title">
      <h1>Calculadoras SNTSS</h1>
      <span>Versión Completa (Todas las fórmulas visibles)</span>
    </div>
  </div>

  <div class="layout">
    <nav class="sidebar">
      <button class="nav-btn active" onclick="show('c97', this)">
        <span>Anticipo de Sueldo</span> <span class="badge">Cl. 97</span>
      </button>
      <button class="nav-btn" onclick="show('julio', this)">
        <span>Fondo de Ahorro</span> <span class="badge">Cl. 144</span>
      </button>
      <button class="nav-btn" onclick="show('extra', this)">
        <span>Tiempo Extra</span> <span class="badge">Cl. 32</span>
      </button>
      <button class="nav-btn" onclick="show('creditos', this)">
        <span>Créditos Casa/Auto</span> <span class="badge">Cl. 81</span>
      </button>
      <button class="nav-btn" onclick="show('aguinaldo', this)">
        <span>Aguinaldo</span> <span class="badge">Cl. 107</span>
      </button>
    </nav>

    <main>
      
      <div id="c97" class="calc-box">
        <h2>Anticipo de Sueldo</h2>
        <div class="desc">Solicitud de préstamo sin intereses a descontar vía nómina.</div>

        <div class="tech-card">
          <div class="tech-title">Reglas de Operación (Cl. 97)</div>
          <div class="tech-content">
            • <strong>Monto Máximo:</strong> Hasta 4 meses de tu sueldo mensual.<br>
            • <strong>Plazo de Pago:</strong> 10 quincenas por cada mes solicitado.<br>
            • <strong>Fórmula Descuento:</strong> (Sueldo Mensual * Meses) / (Meses * 10).<br>
            <em>Nota: Matemáticamente el descuento siempre es el 10% de tu sueldo mensual.</em>
          </div>
        </div>

        <div class="form-grid">
          <div class="field">
            <label>Sueldo Mensual ($)</label>
            <input type="number" id="c97_sueldo" placeholder="Sueldo Tabular + Ayuda Renta">
            <small>Suma Concepto Tabular + Concepto 011</small>
          </div>
          <div class="field">
            <label>Meses a solicitar</label>
            <select id="c97_meses">
              <option value="1">1 Mes (10 Qnas)</option>
              <option value="2">2 Meses (20 Qnas)</option>
              <option value="3">3 Meses (30 Qnas)</option>
              <option value="4">4 Meses (40 Qnas)</option>
            </select>
          </div>
        </div>

        <button class="btn-calc" onclick="calcC97()">CALCULAR</button>

        <div class="result-area hide" id="res_c97">
          <div class="res-row">
            <span class="res-lbl">Monto Total del Préstamo</span>
            <span class="res-val" id="val_c97_monto">$0.00</span>
          </div>
          <div class="res-row">
            <span class="res-lbl">Plazo total a pagar</span>
            <span class="res-val" id="val_c97_plazo">0 Quincenas</span>
          </div>
          <div class="res-row">
            <span class="res-lbl">Descuento Quincenal (Fijo)</span>
            <span class="res-val" id="val_c97_desc">$0.00</span>
          </div>
        </div>
      </div>

      <div id="julio" class="calc-box hide">
        <h2>Fondo de Ahorro (2da Julio)</h2>
        <div class="desc">Pago proporcional a los días laborados en el periodo anual.</div>

        <div class="tech-card">
          <div class="tech-title">Fórmula Técnica (Cl. 144)</div>
          <div class="tech-content">
            • <strong>Base:</strong> 46 días de Sueldo Tabular.<br>
            • <strong>Cálculo:</strong> (Sueldo Tabular / 30) * 46 * (Días Trabajados / 365).<br>
            • <strong>Salida:</strong> Concepto 055 Fondo de Ahorro.
          </div>
        </div>

        <div class="form-grid">
          <div class="field">
            <label>Sueldo Tabular Mensual ($)</label>
            <input type="number" id="fa_sueldo" placeholder="Solo sueldo base">
            <small>Busca el Concepto 002</small>
          </div>
          <div class="field">
            <label>Días trabajados</label>
            <input type="number" id="fa_dias" value="365" max="365">
            <small>Periodo: 1 de Julio al 30 de Junio</small>
          </div>
        </div>

        <button class="btn-calc" onclick="calcFA()">CALCULAR</button>

        <div class="result-area hide" id="res_fa">
          <div class="res-row">
            <span class="res-lbl">Sueldo Diario Tabular</span>
            <span class="res-val" id="val_fa_diario">$0.00</span>
          </div>
          <div class="res-row">
            <span class="res-lbl">Proporción de días</span>
            <span class="res-val" id="val_fa_prop">100%</span>
          </div>
          <div class="res-row">
            <span class="res-lbl"><span class="concept-tag">055</span> Total a recibir</span>
            <span class="res-val" id="val_fa_total">$0.00</span>
          </div>
        </div>
      </div>

      <div id="extra" class="calc-box hide">
        <h2>Pago de Tiempo Extra</h2>
        <div class="desc">Cálculo de horas dobles o triples según jornada.</div>

        <div class="tech-card">
          <div class="tech-title">Desglose de la Fórmula</div>
          <div class="tech-content">
            1. <strong>Base Hora:</strong> (Sueldo Tabular + Ayuda Renta) / 30 días / 8 horas.<br>
            2. <strong>Pago Doble:</strong> Base Hora * 2 * Horas (Primeras 9h).<br>
            3. <strong>Pago Triple:</strong> Base Hora * 3 * Horas (Excedentes o festivos).<br>
            • <strong>Salida:</strong> Concepto 037.
          </div>
        </div>

        <div class="form-grid">
          <div class="field">
            <label>Sueldo Tabular ($)</label>
            <input type="number" id="te_tab">
          </div>
          <div class="field">
            <label>Ayuda de Renta ($)</label>
            <input type="number" id="te_renta" placeholder="Cpto 011">
          </div>
          <div class="field">
            <label>Horas laboradas</label>
            <input type="number" id="te_horas" placeholder="Ej. 6">
          </div>
          <div class="field">
            <label>Tipo de pago</label>
            <select id="te_tipo">
              <option value="2">Doble (Ordinario hasta 9h)</option>
              <option value="3">Triple (Festivo/Excedente)</option>
            </select>
          </div>
        </div>

        <button class="btn-calc" onclick="calcTE()">CALCULAR</button>

        <div class="result-area hide" id="res_te">
          <div class="res-row">
            <span class="res-lbl">Costo por Hora Normal</span>
            <span class="res-val" id="val_te_hora">$0.00</span>
          </div>
          <div class="res-row">
            <span class="res-lbl"><span class="concept-tag">037</span> Total Pago Extra</span>
            <span class="res-val" id="val_te_total">$0.00</span>
          </div>
        </div>
      </div>

      <div id="creditos" class="calc-box hide">
        <h2>Créditos Hipotecarios y Auto</h2>
        <div class="desc">Simulador basado en tu Salario Mensual Integrado (SMI).</div>

        <div class="tech-card">
          <div class="tech-title">Lógica del Cálculo (SMI)</div>
          <div class="tech-content">
            • <strong>SMI (Base):</strong> (Tabular + Ayuda Renta) + 20%.<br>
            • <strong>Hipotecario:</strong> Desc. quincenal del 30% del SMI (o 25% si categoría básica).<br>
            • <strong>Automotriz:</strong> Desc. quincenal del 40% al 36% del SMI según el año.
          </div>
        </div>

        <div class="form-grid">
          <div class="field" style="grid-column:1/-1; background:rgba(77,161,168,.1); padding:10px; border-radius:8px">
            <label style="color:var(--primary)">TIPO DE CRÉDITO</label>
            <select id="cr_tipo" onchange="toggleCrFields()">
              <option value="hip_largo">Hipotecario Largo Plazo (Cl. 81)</option>
              <option value="hip_medio">Hipotecario Mediano Plazo</option>
              <option value="auto">Automóvil (Cl. 146)</option>
            </select>
          </div>

          <div class="field">
            <label>Sueldo Tabular</label>
            <input type="number" id="cr_tab">
          </div>
          <div class="field">
            <label>Ayuda de Renta</label>
            <input type="number" id="cr_renta" placeholder="Cpto 011">
          </div>

          <div class="field cr-hip">
            <label>Categoría</label>
            <select id="cr_cat">
              <option value="0.30">Superior a Mensajero (30%)</option>
              <option value="0.25">Mensajero o menor (25%)</option>
            </select>
          </div>
          <div class="field cr-hip">
            <label>Liquidez / Factor</label>
            <select id="cr_factor">
              <option value="75">75x (Estándar)</option>
              <option value="90">90x (Con liquidez)</option>
              <option value="35">35x (Mediano Plazo)</option>
            </select>
          </div>

          <div class="field cr-auto hide">
            <label>Año del Crédito Auto</label>
            <select id="cr_anio">
              <option value="0.40">Año 1 (40%)</option>
              <option value="0.39">Año 2 (39%)</option>
              <option value="0.38">Año 3 (38%)</option>
              <option value="0.37">Año 4 (37%)</option>
              <option value="0.36">Año 5 (36%)</option>
            </select>
          </div>
        </div>

        <button class="btn-calc" onclick="calcCR()">CALCULAR</button>

        <div class="result-area hide" id="res_cr">
          <div class="res-row">
            <span class="res-lbl">SMI (Salario Mensual Integrado)</span>
            <span class="res-val" id="val_cr_smi">$0.00</span>
          </div>
          <div class="res-row">
            <span class="res-lbl">Monto Máximo de Préstamo</span>
            <span class="res-val" id="val_cr_max">$0.00</span>
          </div>
          <div class="res-row" style="background:rgba(255,91,91,.1)">
            <span class="res-lbl">Descuento Quincenal Estimado</span>
            <span class="res-val" id="val_cr_desc">$0.00</span>
          </div>
        </div>
      </div>

      <div id="aguinaldo" class="calc-box hide">
        <h2>Calculadora de Aguinaldo</h2>
        <div class="desc">Cláusula 107 - Libre de impuestos (ISR Absorbido).</div>

        <div class="tech-card">
          <div class="tech-title">Distribución del Pago</div>
          <div class="tech-content">
            • <strong>Total Anual:</strong> 3 meses de Sueldo Nominal.<br>
            • <strong>Enero (Cpto 047):</strong> 0.5 meses (Anticipo).<br>
            • <strong>Diciembre (Cpto 049):</strong> El saldo restante (1.5 meses si pediste en agosto, o 2.5 si no).
          </div>
        </div>

        <div class="form-grid">
          <div class="field" style="grid-column:1/-1">
            <label>Sueldo Nominal Mensual ($)</label>
            <input type="number" id="ag_sueldo" placeholder="Sueldo Tabular + Renta + Ayudas">
          </div>
          <div class="field">
            <label>¿Pediste anticipo en Agosto?</label>
            <select id="ag_agosto">
              <option value="no">No</option>
              <option value="si">Sí (1 mes)</option>
            </select>
          </div>
        </div>

        <button class="btn-calc" onclick="calcAG()">CALCULAR</button>

        <div class="result-area hide" id="res_ag">
          <div class="res-row">
            <span class="res-lbl"><span class="concept-tag">047</span> Pago Enero</span>
            <span class="res-val" id="val_ag_ene">$0.00</span>
          </div>
          <div class="res-row">
            <span class="res-lbl">Pago Agosto (Si aplica)</span>
            <span class="res-val" id="val_ag_ago">$0.00</span>
          </div>
          <div class="res-row">
            <span class="res-lbl"><span class="concept-tag">049</span> Pago Diciembre</span>
            <span class="res-val" id="val_ag_dic">$0.00</span>
          </div>
          <div class="res-row" style="border-top:2px solid var(--primary)">
            <span class="res-lbl">TOTAL ANUAL (3 Meses)</span>
            <span class="res-val" id="val_ag_total">$0.00</span>
          </div>
        </div>
      </div>

    </main>
  </div>
</div>

<script>
  /* --- Utilidades --- */
  const $ = id => document.getElementById(id);
  const money = n => n.toLocaleString('es-MX', {style:'currency', currency:'MXN'});
  const num = id => parseFloat($(id).value) || 0;

  /* --- Navegación --- */
  function show(id, btn){
    // Ocultar todos los paneles
    document.querySelectorAll('.calc-box').forEach(el => el.classList.add('hide'));
    // Mostrar el seleccionado
    $(id).classList.remove('hide');
    
    // Actualizar botones
    document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
    btn.classList.add('active');
  }

  /* --- 1. Anticipo C97 --- */
  function calcC97(){
    const sueldo = num('c97_sueldo');
    const meses = parseInt($('c97_meses').value);

    if(sueldo <= 0) return alert("Ingresa un sueldo válido");

    const monto = sueldo * meses;
    const quincenas = meses * 10;
    const descuento = monto / quincenas;

    $('val_c97_monto').innerText = money(monto);
    $('val_c97_plazo').innerText = quincenas + " Quincenas";
    $('val_c97_desc').innerText = money(descuento);
    $('res_c97').classList.remove('hide');
  }

  /* --- 2. Fondo Ahorro --- */
  function calcFA(){
    const sueldo = num('fa_sueldo');
    const dias = num('fa_dias');

    if(sueldo <= 0) return alert("Ingresa sueldo tabular");
    
    const diario = sueldo / 30;
    const prop = dias / 365; // Proporción del año trabajado
    const total = diario * 46 * prop; // Fórmula Cl. 144

    $('val_fa_diario').innerText = money(diario);
    $('val_fa_prop').innerText = (prop * 100).toFixed(1) + "% (" + dias + " días)";
    $('val_fa_total').innerText = money(total);
    $('res_fa').classList.remove('hide');
  }

  /* --- 3. Tiempo Extra --- */
  function calcTE(){
    const tab = num('te_tab');
    const renta = num('te_renta');
    const horas = num('te_horas');
    const factor = parseInt($('te_tipo').value); // 2 o 3

    if((tab+renta) <= 0) return alert("Ingresa Tabular y Renta");

    const baseHora = (tab + renta) / 30 / 8;
    const total = baseHora * factor * horas;

    $('val_te_hora').innerText = money(baseHora);
    $('val_te_total').innerText = money(total);
    $('res_te').classList.remove('hide');
  }

  /* --- 4. Créditos (Lógica Unificada) --- */
  function toggleCrFields(){
    const tipo = $('cr_tipo').value;
    const hipFields = document.querySelectorAll('.cr-hip');
    const autoFields = document.querySelector('.cr-auto');

    // Manejo de visibilidad de inputs según tipo
    if(tipo === 'auto'){
      hipFields.forEach(e => e.classList.add('hide'));
      autoFields.classList.remove('hide');
    } else {
      hipFields.forEach(e => e.classList.remove('hide'));
      autoFields.classList.add('hide');
      
      // Ajuste automático de factor para mediano plazo
      const selFactor = $('cr_factor');
      if(tipo === 'hip_medio'){
        selFactor.value = "35";
        selFactor.disabled = true; // Forzar 35x
      } else {
        if(selFactor.value === "35") selFactor.value = "75"; // Reset
        selFactor.disabled = false;
      }
    }
    $('res_cr').classList.add('hide');
  }

  function calcCR(){
    const tab = num('cr_tab');
    const renta = num('cr_renta');
    const tipo = $('cr_tipo').value;

    if((tab+renta) <= 0) return alert("Ingresa Tabular y Renta");

    // 1. SMI
    const smi = (tab + renta) * 1.20;

    let maxMonto = 0;
    let factorDesc = 0; // Porcentaje del SMI a descontar mensual

    if(tipo === 'auto'){
      // Auto: Max 24 SMI, Descuento según año (0.40 a 0.36)
      maxMonto = smi * 24;
      factorDesc = parseFloat($('cr_anio').value);
    } else {
      // Hipotecario (Largo o Medio)
      const factorMonto = parseFloat($('cr_factor').value);
      maxMonto = smi * factorMonto;
      
      // Descuento según categoría (0.30 o 0.25)
      factorDesc = parseFloat($('cr_cat').value);
    }

    // Descuento Quincenal = (SMI * FactorMensual) / 2
    const descQuincenal = (smi * factorDesc) / 2;

    $('val_cr_smi').innerText = money(smi);
    $('val_cr_max').innerText = money(maxMonto);
    $('val_cr_desc').innerText = money(descQuincenal);
    $('res_cr').classList.remove('hide');
  }

  /* --- 5. Aguinaldo --- */
  function calcAG(){
    const sueldo = num('ag_sueldo');
    const pidioAgosto = $('ag_agosto').value === 'si';

    if(sueldo <= 0) return alert("Ingresa sueldo nominal");

    const total = sueldo * 3;
    const ene = sueldo * 0.5;
    const ago = pidioAgosto ? sueldo * 1.0 : 0;
    const dic = total - ene - ago;

    $('val_ag_ene').innerText = money(ene);
    $('val_ag_ago').innerText = money(ago);
    $('val_ag_dic').innerText = money(dic);
    $('val_ag_total').innerText = money(total);
    $('res_ag').classList.remove('hide');
  }

</script>

</body>
</html>
