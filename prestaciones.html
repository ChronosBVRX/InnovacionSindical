<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Simulador Sindical</title>
<style>
body{font-family:Arial;background:#f4f6f9;margin:0;padding:20px}
.container{max-width:1100px;margin:auto}
.card{background:white;padding:20px;border-radius:12px;margin-bottom:20px;box-shadow:0 4px 10px rgba(0,0,0,.05)}
h2{margin-top:0;color:#2e5077}
label{font-weight:bold;margin-top:10px;display:block}
input,select{width:100%;padding:8px;margin-top:5px;border-radius:8px;border:1px solid #ccc}
button{margin-top:15px;padding:10px;background:#2e5077;color:white;border:none;border-radius:8px;cursor:pointer}
.resultado{margin-top:15px;padding:15px;background:#e9f1f8;border-radius:10px}
.small{font-size:12px;color:#555;margin-top:8px}
.concepto{background:#2e5077;color:white;padding:3px 8px;border-radius:6px;font-size:12px}
</style>
</head>
<body>
<div class="container">

<div class="card">
<h2>Datos Base</h2>

<label>Categoría</label>
<select id="categoria"></select>

<label>Jornada</label>
<select id="jornada"></select>

<label>Sueldo Tabular (Concepto 02) – Quincenal</label>
<input type="number" id="tabular">

<label>Ayuda de Renta (Concepto 011) – Quincenal</label>
<input type="number" id="renta">
</div>

<div id="calculadoras"></div>

</div>

<script>
// ================= BASE DE DATOS =================
const sueldosDB = {
  "Auxiliar Universal": {
    "8": 8200,
    "6.5": 7800
  },
  "Enfermera General": {
    "8": 10500,
    "6.5": 9800
  },
  "Médico Familiar": {
    "8": 18000,
    "6.5": 16500
  }
};

// ================= INICIALIZAR SELECTS =================
const categoriaSelect = document.getElementById("categoria");
const jornadaSelect = document.getElementById("jornada");

Object.keys(sueldosDB).forEach(cat=>{
  let opt = document.createElement("option");
  opt.value = cat;
  opt.textContent = cat;
  categoriaSelect.appendChild(opt);
});

function cargarJornadas(){
  jornadaSelect.innerHTML="";
  const jornadas = sueldosDB[categoriaSelect.value];
  Object.keys(jornadas).forEach(j=>{
    let opt = document.createElement("option");
    opt.value = j;
    opt.textContent = j + " horas";
    jornadaSelect.appendChild(opt);
  });
  actualizarTabular();
}

function actualizarTabular(){
  const cat = categoriaSelect.value;
  const jor = jornadaSelect.value;
  document.getElementById("tabular").value = sueldosDB[cat][jor];
}

categoriaSelect.addEventListener("change",cargarJornadas);
jornadaSelect.addEventListener("change",actualizarTabular);
cargarJornadas();

// ================= FUNCIONES GENERALES =================
function sueldoMensual(){
  const tabQ = parseFloat(tabular.value||0);
  const rentQ = parseFloat(renta.value||0);
  return (tabQ*2)+(rentQ*2);
}

function salarioDiario(){
  return sueldoMensual()/30;
}

function costoHora(){
  return salarioDiario()/parseFloat(jornadaSelect.value);
}

function formato(n){
  return n.toLocaleString("es-MX",{minimumFractionDigits:2});
}

// ================= GENERADOR DE CALCULADORAS =================
const calculadoras = [
{
titulo:"Anticipo de Sueldo",
html:`
<label>Meses solicitados (1-3)</label>
<input type="number" id="aMeses">
<button onclick="calcAnticipo()">Calcular</button>
<div id="rAnticipo" class="resultado"></div>
`,
func:"calcAnticipo"
},
{
titulo:"Fondo de Ahorro (Julio)",
html:`
<label>Días cotizados</label>
<input type="number" id="fDias">
<button onclick="calcFondo()">Calcular</button>
<div id="rFondo" class="resultado"></div>
`,
func:"calcFondo"
},
{
titulo:"Tiempo Extra",
html:`
<label>Horas</label>
<input type="number" id="tHoras">
<label>Factor (2 o 2.5)</label>
<input type="number" id="tFactor">
<button onclick="calcTiempo()">Calcular</button>
<div id="rTiempo" class="resultado"></div>
`,
func:"calcTiempo"
},
{
titulo:"Crédito Hipotecario Largo (30 años)",
html:`<button onclick="calcHipLargo()">Calcular</button>
<div id="rHipLargo" class="resultado"></div>`,
func:"calcHipLargo"
},
{
titulo:"Crédito Hipotecario Medio (12 años)",
html:`<button onclick="calcHipMedio()">Calcular</button>
<div id="rHipMedio" class="resultado"></div>`,
func:"calcHipMedio"
},
{
titulo:"Crédito Auto",
html:`<button onclick="calcAuto()">Calcular</button>
<div id="rAuto" class="resultado"></div>`,
func:"calcAuto"
},
{
titulo:"Aguinaldo",
html:`<button onclick="calcAguinaldo()">Calcular</button>
<div id="rAguinaldo" class="resultado"></div>`,
func:"calcAguinaldo"
}
];

const cont = document.getElementById("calculadoras");
calculadoras.forEach(c=>{
  cont.innerHTML += `<div class="card"><h2>${c.titulo}</h2>${c.html}</div>`;
});

// ================= CALCULADORAS =================
function calcAnticipo(){
  const meses = parseFloat(aMeses.value||0);
  const monto = sueldoMensual()*meses;
  const plazo = meses*10;
  const desc = monto/plazo;
  rAnticipo.innerHTML = `
  Monto aproximado: $${formato(monto)}<br>
  Descuento quincenal por ${plazo} quincenas: $${formato(desc)}<br>
  <span class="concepto">Deducción Temporal</span>
  <div class="small">Art. 97 CCT</div>`;
}

function calcFondo(){
  const dias = parseFloat(fDias.value||0);
  const diasPagar = 46*(dias/365);
  const total = salarioDiario()*diasPagar;
  rFondo.innerHTML = `
  Pago estimado: $${formato(total)}<br>
  <span class="concepto">Concepto 055</span>
  <div class="small">Art. 144 CCT</div>`;
}

function calcTiempo(){
  const horas = parseFloat(tHoras.value||0);
  const factor = parseFloat(tFactor.value||2);
  const total = costoHora()*factor*horas;
  rTiempo.innerHTML = `
  Pago estimado: $${formato(total)}<br>
  <span class="concepto">Concepto 037</span>
  <div class="small">Art. 32-33 CCT</div>`;
}

function calcHipLargo(){
  const smi = sueldoMensual()*1.20;
  const max = smi*(parseFloat(jornadaSelect.value)==8?90:75);
  const desc = (smi*(parseFloat(jornadaSelect.value)==8?0.30:0.25))/2;
  rHipLargo.innerHTML = `
  Monto máximo: $${formato(max)}<br>
  Descuento quincenal estimado: $${formato(desc)}<br>
  <span class="concepto">Concepto 130</span>
  <div class="small">Sujeto a liquidez disponible</div>`;
}

function calcHipMedio(){
  const smi = sueldoMensual()*1.20;
  const max = smi*35;
  const desc = (smi*(parseFloat(jornadaSelect.value)==8?0.30:0.25))/2;
  rHipMedio.innerHTML = `
  Monto máximo: $${formato(max)}<br>
  Descuento quincenal estimado: $${formato(desc)}<br>
  <span class="concepto">Concepto 136</span>
  <div class="small">Sujeto a liquidez disponible</div>`;
}

function calcAuto(){
  const smi = sueldoMensual()*1.20;
  const max = smi*24;
  const desc = (smi*0.40)/2;
  rAuto.innerHTML = `
  Monto máximo: $${formato(max)}<br>
  Descuento quincenal inicial: $${formato(desc)}<br>
  <span class="concepto">Concepto 134</span>
  <div class="small">Art. 146 CCT - sujeto a liquidez</div>`;
}

function calcAguinaldo(){
  const total = sueldoMensual()*3;
  const enero = sueldoMensual()*0.5;
  const agosto = sueldoMensual()*1;
  const diciembre = total - enero - agosto;
  rAguinaldo.innerHTML = `
  Total estimado: $${formato(total)}<br>
  Enero: $${formato(enero)} <span class="concepto">047</span><br>
  Agosto: $${formato(agosto)} <span class="concepto">049</span><br>
  Diciembre: $${formato(diciembre)} <span class="concepto">047</span>
  <div class="small">Art. 107 CCT</div>`;
}
</script>

</body>
</html>
