<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Plataforma Sindical CG — Calculadoras CCT</title>
  <link rel="icon" href="https://raw.githubusercontent.com/ChronosBVRX/InnovacionSindical/refs/heads/main/Logo%20SNTSS.jpeg">

  <style>
    :root{
      --bg:#1b2e45;
      --bg2:#0f1a26;
      --panel:rgba(46,79,119,.60);
      --ring:rgba(77,161,168,.4);
      --txt:#f0fdfa;
      --muted:#9abac0;
      --primary:#4da1a8;
      --sky:#7ad1d6;
      --danger:#ff5b5b;
      --ok:#45d39f;
      --shadow: 0 18px 40px rgba(0,0,0,.35);
    }
    *{box-sizing:border-box;margin:0;padding:0;font-family:system-ui,-apple-system,'Segoe UI',Roboto,Helvetica,Arial,sans-serif}
    
    body{
      min-height:100vh;
      color:var(--txt);
      background: linear-gradient(180deg, var(--bg) 0%, var(--bg2) 100%);
      padding: 18px;
    }
    
    .wrap{max-width:1100px;margin:0 auto}

    /* --- Topbar --- */
    .topbar{
      display:flex; flex-wrap:wrap; gap:16px; align-items:center; justify-content:space-between;
      background: rgba(30,55,80,.6);
      border: 1px solid rgba(255,255,255,.08);
      border-radius: 16px;
      padding: 12px 16px;
      backdrop-filter: blur(12px);
      margin-bottom: 20px;
    }
    .brand{display:flex; gap:12px; align-items:center;}
    .logo{
      width:42px;height:42px;border-radius:10px;
      background: linear-gradient(135deg, #4da1a8, #2e5077);
      display:grid;place-items:center;
      font-weight:800; color:#fff; font-size:18px;
      box-shadow: 0 4px 12px rgba(77,161,168,.3);
    }
    .title h1{font-size:16px; font-weight:700; letter-spacing:-0.01em;}
    .title span{font-size:12px; color:var(--muted); display:block;}

    /* Switch Avanzado */
    .mode-toggle{
      display:flex; align-items:center; gap:8px;
      background: rgba(0,0,0,.2); padding:6px 12px; border-radius:20px;
      border:1px solid rgba(255,255,255,.05);
      cursor:pointer; user-select:none;
    }
    .switch{
      width:36px; height:20px; background:rgba(255,255,255,.1); border-radius:20px; position:relative;
      transition:background .3s;
    }
    .switch::after{
      content:''; position:absolute; left:2px; top:2px; width:16px; height:16px;
      background:#fff; border-radius:50%; transition:transform .3s;
    }
    .mode-toggle.active .switch{background:var(--primary)}
    .mode-toggle.active .switch::after{transform:translateX(16px)}
    .mode-label{font-size:12px; font-weight:600; color:var(--sky)}

    /* --- Grid Layout --- */
    .grid{
      display:grid; grid-template-columns: 280px 1fr; gap:20px;
    }
    @media (max-width:850px){ .grid{grid-template-columns:1fr} }

    /* --- Sidebar Menu --- */
    .menu{display:flex; flex-direction:column; gap:8px;}
    .menu-btn{
      background: rgba(255,255,255,.03);
      border: 1px solid transparent;
      padding: 12px; border-radius: 12px;
      color: var(--muted); text-align:left;
      cursor:pointer; transition:all .2s;
      display:flex; gap:12px; align-items:center;
    }
    .menu-btn:hover{background:rgba(255,255,255,.06); color:#fff}
    .menu-btn.active{
      background: linear-gradient(90deg, rgba(77,161,168,.15), transparent);
      border-color: rgba(77,161,168,.3);
      color: var(--sky);
    }
    .menu-ico{
      width:32px; height:32px; background:rgba(255,255,255,.05);
      border-radius:8px; display:grid; place-items:center; font-weight:700; font-size:13px;
    }
    .menu-btn.active .menu-ico{background:var(--primary); color:#0f1a26}

    /* --- Main Panel --- */
    .panel{
      background: var(--panel);
      border: 1px solid rgba(255,255,255,.08);
      border-radius: 20px;
      padding: 24px;
      backdrop-filter: blur(10px);
    }
    .header{margin-bottom:20px; border-bottom:1px solid rgba(255,255,255,.08); padding-bottom:15px}
    .header h2{font-size:20px; color:#fff; margin-bottom:4px}
    .header p{font-size:13px; color:var(--muted); line-height:1.4}

    /* Forms */
    .form-grid{display:grid; grid-template-columns:1fr 1fr; gap:16px;}
    @media (max-width:600px){ .form-grid{grid-template-columns:1fr} }

    .field{display:flex; flex-direction:column; gap:6px;}
    .field label{font-size:12px; font-weight:600; color:var(--sky)}
    .field input, .field select{
      background: rgba(15,26,38,.6);
      border: 1px solid rgba(255,255,255,.1);
      color: #fff;
      padding: 12px; border-radius: 10px;
      font-size: 14px; outline:none; transition:border .2s;
    }
    .field input:focus, .field select:focus{border-color:var(--primary)}
    .field small{font-size:11px; color:var(--muted); opacity:.8}

    .actions{margin-top:24px; display:flex; gap:10px}
    .btn{
      padding: 12px 24px; border-radius:10px; border:none;
      font-weight:700; cursor:pointer; font-size:14px;
      transition:transform .1s;
    }
    .btn:active{transform:scale(.97)}
    .btn-primary{background:var(--primary); color:#08202b;}
    .btn-ghost{background:transparent; border:1px solid rgba(255,255,255,.2); color:var(--muted)}

    /* Result Cards */
    .result-box{
      margin-top:24px;
      background: rgba(15,26,38,.5);
      border-radius: 14px;
      overflow:hidden;
      border: 1px solid rgba(77,161,168,.2);
    }
    .res-row{
      display:flex; justify-content:space-between; align-items:center;
      padding: 12px 16px; border-bottom:1px solid rgba(255,255,255,.05);
    }
    .res-row:last-child{border-bottom:none; background:rgba(77,161,168,.1)}
    .res-label{font-size:13px; color:var(--muted)}
    .res-value{font-weight:700; font-family:'Courier New', monospace; font-size:15px}
    .res-concept{font-size:11px; color:var(--sky); background:rgba(77,161,168,.15); padding:2px 6px; border-radius:4px; margin-right:8px}

    /* Utilities */
    .hide{display:none}
    .adv-only{display:none} /* Oculto por defecto */
    .show-adv .adv-only{display:block} /* Mostrar si padre tiene show-adv */
    .formula-info{
      margin-top:16px; padding:12px; border-radius:10px;
      background:rgba(255,230,0,.05); border:1px solid rgba(255,230,0,.15);
      color:#ffeeb0; font-size:12px; line-height:1.5;
    }
  </style>
</head>
<body>

<div class="wrap">
  
  <div class="topbar">
    <div class="brand">
      <div class="logo">CG</div>
      <div class="title">
        <h1>Calculadoras SNTSS</h1>
        <span>Herramientas de CCT y Nómina</span>
      </div>
    </div>
    
    <div class="mode-toggle" id="modeToggle">
      <span class="mode-label">Modo Experto</span>
      <div class="switch"></div>
    </div>
  </div>

  <div class="grid">
    
    <nav class="menu">
      <div class="menu-btn active" onclick="loadView('c97')">
        <div class="menu-ico">97</div>
        <div>Anticipo de Sueldo<br><small>Cláusula 97</small></div>
      </div>
      <div class="menu-btn" onclick="loadView('julio')">
        <div class="menu-ico">FA</div>
        <div>Fondo de Ahorro<br><small>2da Julio (Cl. 144)</small></div>
      </div>
      <div class="menu-btn" onclick="loadView('extra')">
        <div class="menu-ico">TE</div>
        <div>Tiempo Extra<br><small>Cl. 32-38</small></div>
      </div>
      <div class="menu-btn" onclick="loadView('creditos')">
        <div class="menu-ico">CR</div>
        <div>Créditos (Casa/Auto)<br><small>Cl. 81, 146</small></div>
      </div>
      <div class="menu-btn" onclick="loadView('aguinaldo')">
        <div class="menu-ico">AG</div>
        <div>Aguinaldo<br><small>Enero y Anual (Cl. 107)</small></div>
      </div>
    </nav>

    <main class="panel" id="mainPanel">
      
      <div id="view-c97" class="view">
        <div class="header">
          <h2>Anticipo de Sueldo (Cláusula 97)</h2>
          <p>Préstamo sin intereses a descontar vía nómina. Busca los datos en tu tarjetón.</p>
        </div>
        
        <div class="form-grid">
          <div class="field" style="grid-column: 1/-1">
            <label>Sueldo Mensual Integrado</label>
            <input type="number" id="c97_sueldo" placeholder="Ej. 12000">
            <small>Suma: Sueldo Tabular + Concepto 011 (Ayuda de Renta)</small>
          </div>
          <div class="field">
            <label>Meses a solicitar</label>
            <select id="c97_meses">
              <option value="1">1 Mes</option>
              <option value="2">2 Meses</option>
              <option value="3">3 Meses</option>
              <option value="4">4 Meses</option>
            </select>
          </div>
        </div>

        <div class="formula-info adv-only">
          <strong>Fórmula C97:</strong> Monto = Sueldo × Meses.<br>
          Plazo = 10 quincenas por cada mes solicitado.<br>
          Descuento = Monto / Plazo.
        </div>

        <div class="actions">
          <button class="btn btn-primary" onclick="calcC97()">Calcular</button>
        </div>

        <div id="res-c97" class="result-box hide">
          <div class="res-row">
            <span class="res-label">Monto a recibir</span>
            <span class="res-value" id="c97_res_monto">$0.00</span>
          </div>
          <div class="res-row">
            <span class="res-label">Plazo de pago</span>
            <span class="res-value" id="c97_res_plazo">0 Quincenas</span>
          </div>
          <div class="res-row">
            <span class="res-label">Descuento Quincenal</span>
            <span class="res-value" id="c97_res_desc">$0.00</span>
          </div>
        </div>
      </div>

      <div id="view-julio" class="view hide">
        <div class="header">
          <h2>Fondo de Ahorro (Cláusula 144)</h2>
          <p>Cálculo de la 2da quincena de julio. Pago proporcional a días trabajados.</p>
        </div>
        
        <div class="form-grid">
          <div class="field">
            <label>Sueldo Tabular Mensual</label>
            <input type="number" id="jul_sueldo" placeholder="Solo el sueldo base">
            <small>Concepto 002 (Sueldo base)</small>
          </div>
          <div class="field">
            <label>Días trabajados</label>
            <input type="number" id="jul_dias" value="365" max="365">
            <small>Periodo: 1 Jul anterior al 30 Jun actual</small>
          </div>
        </div>

        <div class="formula-info adv-only">
          <strong>Fórmula:</strong> (Tabular / 30) × 46 días × (DíasTrabajados / 365).<br>
          Concepto nómina: 055 Fondo de Ahorro.
        </div>

        <div class="actions">
          <button class="btn btn-primary" onclick="calcJulio()">Calcular</button>
        </div>

        <div id="res-julio" class="result-box hide">
          <div class="res-row">
            <span class="res-label">Factor Días (Base 46)</span>
            <span class="res-value" id="jul_res_factor">46.00</span>
          </div>
          <div class="res-row">
            <span class="res-label"><span class="res-concept">Cpto 055</span> Pago Estimado</span>
            <span class="res-value" id="jul_res_total">$0.00</span>
          </div>
        </div>
      </div>

      <div id="view-extra" class="view hide">
        <div class="header">
          <h2>Pago de Tiempo Extra</h2>
          <p>Cláusulas 32-38. Recuerda verificar tu tipo de jornada (calculado a 8hrs).</p>
        </div>
        
        <div class="form-grid">
          <div class="field">
            <label>Sueldo Tabular</label>
            <input type="number" id="te_tab" placeholder="$">
          </div>
          <div class="field">
            <label>Ayuda de Renta (Cpto 011)</label>
            <input type="number" id="te_renta" placeholder="$">
            <small>Cláusula 63 Bis b</small>
          </div>
          <div class="field">
            <label>Horas Extras Laboradas</label>
            <input type="number" id="te_horas" placeholder="Ej. 4">
          </div>
          <div class="field">
            <label>Tipo de pago</label>
            <select id="te_tipo">
              <option value="2">Doble (Primeras 9h)</option>
              <option value="3">Triple (Excedentes/Festivos)</option>
            </select>
          </div>
        </div>

        <div class="formula-info adv-only">
          <strong>Base Hora:</strong> (Tabular + Renta) ÷ 30 ÷ 8.<br>
          Pago = Base × Horas × (2 o 3).<br>
          Concepto nómina: 037.
        </div>

        <div class="actions">
          <button class="btn btn-primary" onclick="calcExtra()">Calcular</button>
        </div>

        <div id="res-extra" class="result-box hide">
          <div class="res-row">
            <span class="res-label">Costo por Hora Ordinaria</span>
            <span class="res-value" id="te_res_hora">$0.00</span>
          </div>
          <div class="res-row">
            <span class="res-label"><span class="res-concept">Cpto 037</span> Total a Pagar</span>
            <span class="res-value" id="te_res_total">$0.00</span>
          </div>
        </div>
      </div>

      <div id="view-creditos" class="view hide">
        <div class="header">
          <h2>Simulador de Créditos</h2>
          <p>Hipotecario y Automotriz. Calculado sobre el Salario Mensual Integrado (SMI).</p>
        </div>
        
        <div class="form-grid">
          <div class="field">
            <label>Sueldo Tabular</label>
            <input type="number" id="cr_tab" placeholder="$">
          </div>
          <div class="field">
            <label>Ayuda de Renta (Cpto 011)</label>
            <input type="number" id="cr_renta" placeholder="$">
          </div>
          
          <div class="field" style="grid-column: 1/-1; border-top:1px solid rgba(255,255,255,.1); padding-top:10px; margin-top:5px">
            <label style="color:var(--primary)">Tipo de Crédito</label>
            <select id="cr_tipo" onchange="toggleCreditoOpts()">
              <option value="hip_largo">Hipotecario Largo Plazo (Cl. 81)</option>
              <option value="hip_medio">Hipotecario Mediano Plazo</option>
              <option value="auto">Automóvil (Cl. 146)</option>
            </select>
          </div>

          <div class="field cr-hip-opt">
            <label>Categoría</label>
            <select id="cr_cat">
              <option value="0.30">Superior a Mensajero</option>
              <option value="0.25">Igual/Menor a Mensajero</option>
            </select>
          </div>
          <div class="field cr-hip-opt">
            <label>Liquidez Comprobada</label>
            <select id="cr_liq">
              <option value="75">Estándar (75x)</option>
              <option value="90">Extra (90x)</option>
            </select>
          </div>

          <div class="field cr-auto-opt hide">
            <label>Año del Crédito</label>
            <select id="cr_anio">
              <option value="0.40">Año 1 (40%)</option>
              <option value="0.39">Año 2 (39%)</option>
              <option value="0.38">Año 3 (38%)</option>
              <option value="0.37">Año 4 (37%)</option>
              <option value="0.36">Año 5 (36%)</option>
            </select>
          </div>
        </div>

        <div class="formula-info adv-only">
          <strong>SMI:</strong> (Tabular + Renta) × 1.20.<br>
          <strong>Hipotecario:</strong> Monto Max = SMI × (75 o 35). Desc = SMI × 30% ÷ 2.<br>
          <strong>Auto:</strong> Monto Max = SMI × 24. Desc = SMI × (40% a 36%) ÷ 2.
        </div>

        <div class="actions">
          <button class="btn btn-primary" onclick="calcCredito()">Calcular</button>
        </div>

        <div id="res-creditos" class="result-box hide">
          <div class="res-row">
            <span class="res-label">SMI Base</span>
            <span class="res-value" id="cr_res_smi">$0.00</span>
          </div>
          <div class="res-row">
            <span class="res-label">Monto Máximo Préstamo</span>
            <span class="res-value" id="cr_res_max">$0.00</span>
          </div>
          <div class="res-row">
            <span class="res-label">Descuento Quincenal Est.</span>
            <span class="res-value" id="cr_res_desc">$0.00</span>
          </div>
        </div>
      </div>

      <div id="view-aguinaldo" class="view hide">
        <div class="header">
          <h2>Calculadora de Aguinaldo (Cl. 107)</h2>
          <p>Libre de impuestos. Incluye cálculo de anticipo de Enero.</p>
        </div>
        
        <div class="form-grid">
          <div class="field" style="grid-column: 1/-1">
            <label>Sueldo Nominal Mensual</label>
            <input type="number" id="ag_sueldo" placeholder="Sueldo Tabular + Ayudas fijas">
            <small>Concepto base para cálculo anual</small>
          </div>
          <div class="field">
            <label>¿Pediste anticipo en Agosto?</label>
            <select id="ag_agosto">
              <option value="no">No</option>
              <option value="si">Sí (1 mes)</option>
            </select>
          </div>
        </div>

        <div class="formula-info adv-only">
          <strong>Total:</strong> 3 meses de Sueldo Nominal.<br>
          <strong>Enero:</strong> 0.5 meses (Cpto 047).<br>
          <strong>Diciembre:</strong> Saldo restante (1.5 o 2.5 meses).
        </div>

        <div class="actions">
          <button class="btn btn-primary" onclick="calcAguinaldo()">Calcular</button>
        </div>

        <div id="res-aguinaldo" class="result-box hide">
          <div class="res-row">
            <span class="res-label"><span class="res-concept">Cpto 047</span> Enero (Anticipo)</span>
            <span class="res-value" id="ag_res_ene">$0.00</span>
          </div>
          <div class="res-row">
            <span class="res-label"><span class="res-concept">Cpto 049</span> Diciembre (Saldo)</span>
            <span class="res-value" id="ag_res_dic">$0.00</span>
          </div>
          <div class="res-row" style="background:rgba(255,255,255,.1)">
            <span class="res-label">Total Anual (3 Meses)</span>
            <span class="res-value" id="ag_res_total">$0.00</span>
          </div>
        </div>
      </div>

    </main>
  </div>
</div>

<script>
  // Utils
  const $ = id => document.getElementById(id);
  const money = num => num.toLocaleString('es-MX', {style:'currency', currency:'MXN'});
  const val = id => parseFloat($(id).value) || 0;
  
  // Navigation
  function loadView(viewName) {
    // Buttons
    document.querySelectorAll('.menu-btn').forEach(b => b.classList.remove('active'));
    event.currentTarget.classList.add('active');
    
    // Panels
    document.querySelectorAll('.view').forEach(v => v.classList.add('hide'));
    $('view-' + viewName).classList.remove('hide');
    
    // Hide results on switch
    document.querySelectorAll('.result-box').forEach(b => b.classList.add('hide'));
  }

  // Toggle Advanced Mode
  const panel = $('mainPanel');
  $('modeToggle').addEventListener('click', function(){
    this.classList.toggle('active');
    panel.classList.toggle('show-adv');
  });

  /* --- 1. Anticipo C97 --- */
  function calcC97() {
    const sueldo = val('c97_sueldo');
    const meses = parseInt($('c97_meses').value);
    
    if(sueldo <= 0) return alert("Ingresa un sueldo válido");

    const monto = sueldo * meses;
    // Plazo: 1 mes = 10 qnas, 2=20, etc.
    const plazoQnas = meses * 10; 
    const descuento = monto / plazoQnas;

    $('c97_res_monto').innerText = money(monto);
    $('c97_res_plazo').innerText = plazoQnas + " Quincenas";
    $('c97_res_desc').innerText = money(descuento);
    $('res-c97').classList.remove('hide');
  }

  /* --- 2. Julio FA --- */
  function calcJulio() {
    const sueldo = val('jul_sueldo');
    const dias = val('jul_dias');

    if(sueldo <= 0) return alert("Revisa el sueldo tabular");
    if(dias > 365) return alert("Máximo 365 días");

    // (Sueldo / 30) * 46 * (Dias / 365)
    const factorDias = 46 * (dias / 365);
    const total = (sueldo / 30) * factorDias;

    $('jul_res_factor').innerText = factorDias.toFixed(2) + " días pagados";
    $('jul_res_total').innerText = money(total);
    $('res-julio').classList.remove('hide');
  }

  /* --- 3. Tiempo Extra --- */
  function calcExtra() {
    const tab = val('te_tab');
    const renta = val('te_renta');
    const horas = val('te_horas');
    const factor = parseInt($('te_tipo').value); // 2 o 3

    if((tab + renta) <= 0) return alert("Ingresa Tabular y Renta");

    // Sueldo Hora = (Tab + Renta) / 30 / 8
    const sueldoHora = (tab + renta) / 30 / 8;
    const total = sueldoHora * factor * horas;

    $('te_res_hora').innerText = money(sueldoHora);
    $('te_res_total').innerText = money(total);
    $('res-extra').classList.remove('hide');
  }

  /* --- 4. Créditos (Logic Switch) --- */
  function toggleCreditoOpts() {
    const tipo = $('cr_tipo').value;
    const hips = document.querySelectorAll('.cr-hip-opt');
    const auto = document.querySelector('.cr-auto-opt');
    
    if(tipo === 'auto') {
      hips.forEach(el => el.classList.add('hide'));
      auto.classList.remove('hide');
    } else {
      hips.forEach(el => el.classList.remove('hide'));
      auto.classList.add('hide');
    }
    $('res-creditos').classList.add('hide');
  }

  function calcCredito() {
    const tab = val('cr_tab');
    const renta = val('cr_renta');
    const tipo = $('cr_tipo').value;

    if((tab + renta) <= 0) return alert("Ingresa sueldos válidos");

    // SMI = (Tab + Renta) * 1.20 (Más 20%)
    const smi = (tab + renta) * 1.20;
    
    let maxMonto = 0;
    let factorDesc = 0; 

    if(tipo === 'hip_largo') {
      // Largo Plazo
      const factorLiq = parseFloat($('cr_liq').value); // 75 o 90
      maxMonto = smi * factorLiq;
      // Descuento según categoría: 30% o 25% mensual -> Entre 2 quincenas
      factorDesc = parseFloat($('cr_cat').value) / 2;
    } 
    else if (tipo === 'hip_medio') {
      // Mediano Plazo: Max 35 SMI
      maxMonto = smi * 35;
      factorDesc = parseFloat($('cr_cat').value) / 2;
    } 
    else {
      // Auto: Max 24 SMI
      maxMonto = smi * 24;
      // Descuento según año (40% a 36%) / 2
      factorDesc = parseFloat($('cr_anio').value) / 2;
    }

    const descuentoQna = smi * factorDesc;

    $('cr_res_smi').innerText = money(smi);
    $('cr_res_max').innerText = money(maxMonto);
    $('cr_res_desc').innerText = money(descuentoQna);
    $('res-creditos').classList.remove('hide');
  }

  /* --- 5. Aguinaldo --- */
  function calcAguinaldo() {
    const sueldo = val('ag_sueldo');
    const pidioAgosto = $('ag_agosto').value === 'si';

    if(sueldo <= 0) return alert("Ingresa sueldo nominal");

    const totalAnual = sueldo * 3;
    const enero = sueldo * 0.5; // 1/2 mes
    const agosto = pidioAgosto ? sueldo * 1.0 : 0;
    
    // Saldo Diciembre
    const diciembre = totalAnual - enero - agosto;

    $('ag_res_ene').innerText = money(enero);
    $('ag_res_dic').innerText = money(diciembre);
    $('ag_res_total').innerText = money(totalAnual);
    $('res-aguinaldo').classList.remove('hide');
  }

</script>
</body>
</html>
