<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Tus Prestaciones IMSS - Calculadoras F√°ciles</title>
  <style>
    :root {
      --bg-color: #f8fafc;
      --card-bg: #ffffff;
      --primary: #0ea5e9; 
      --primary-dark: #0284c7;
      --text-main: #334155;
      --text-muted: #64748b;
      --border: #e2e8f0;
      --concept-bg: #dbeafe;
      --concept-text: #1e40af;
      --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
    }

    * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif; }
    body { background-color: var(--bg-color); color: var(--text-main); line-height: 1.6; padding: 20px; }
    .container { max-width: 1000px; margin: 0 auto; }

    /* Encabezado */
    header { background: var(--card-bg); padding: 30px; border-radius: 16px; box-shadow: var(--shadow); margin-bottom: 24px; text-align: center; border-top: 6px solid var(--primary); }
    h1 { font-size: 2rem; font-weight: 800; color: #0f172a; margin-bottom: 10px; }
    p.subtitle { color: var(--text-muted); font-size: 1.1rem; max-width: 650px; margin: 0 auto;}

    /* Buscador Global */
    .global-search { background: var(--card-bg); padding: 24px; border-radius: 16px; box-shadow: var(--shadow); margin-bottom: 24px; border: 1px solid var(--border); }
    .global-search label { display: block; font-weight: 700; margin-bottom: 12px; font-size: 1.1rem; color: #0f172a;}
    .autocomplete-wrapper { position: relative; }
    input[type="text"], input[type="number"], select { width: 100%; padding: 14px; border: 2px solid var(--border); border-radius: 10px; font-size: 1rem; outline: none; transition: border-color 0.2s; background-color: #f8fafc; color: var(--text-main);}
    input:focus, select:focus { border-color: var(--primary); background-color: #fff;}
    
    .autocomplete-items { position: absolute; border: 1px solid var(--border); border-top: none; z-index: 99; top: 100%; left: 0; right: 0; max-height: 250px; overflow-y: auto; background: var(--card-bg); border-radius: 0 0 10px 10px; box-shadow: 0 10px 15px -3px rgba(0,0,0,0.1); }
    .autocomplete-items div { padding: 14px; cursor: pointer; border-bottom: 1px solid var(--border); font-size: 0.95rem;}
    .autocomplete-items div:hover { background-color: #f1f5f9; color: var(--primary-dark); font-weight: 600;}
    
    .user-data-bar { display: none; margin-top: 20px; padding: 16px; background: #f0f9ff; border-radius: 10px; border-left: 5px solid var(--primary); font-size: 0.95rem; align-items: center;}
    .user-data-bar.active { display: flex; gap: 24px; flex-wrap: wrap; }
    .user-data-bar span { font-weight: 700; color: var(--primary-dark); font-size: 1.05rem;}
    .user-data-bar .hint { font-size: 0.8rem; color: var(--text-muted); display: block; margin-top: 2px;}

    /* Layout Principal */
    .layout { display: grid; grid-template-columns: 280px 1fr; gap: 24px; }
    @media (max-width: 768px) { .layout { grid-template-columns: 1fr; } }

    /* Men√∫ Lateral */
    .menu { display: flex; flex-direction: column; gap: 10px; }
    .menu-btn { background: var(--card-bg); border: 2px solid transparent; color: var(--text-main); padding: 16px 20px; border-radius: 12px; text-align: left; cursor: pointer; font-size: 1rem; font-weight: 600; transition: all 0.2s; box-shadow: 0 1px 3px rgba(0,0,0,0.05); }
    .menu-btn:hover { background: #f8fafc; border-color: #cbd5e1; transform: translateX(4px); }
    .menu-btn.active { background: var(--primary); color: white; border-color: var(--primary); box-shadow: 0 4px 6px -1px rgba(14, 165, 233, 0.3); transform: translateX(8px);}

    /* Paneles de Calculadoras */
    .panel { background: var(--card-bg); border-radius: 16px; padding: 30px; box-shadow: var(--shadow); display: none; animation: slideUp 0.3s ease; border: 1px solid var(--border);}
    .panel.active { display: block; }
    @keyframes slideUp { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    
    .panel h2 { color: #0f172a; margin-bottom: 12px; font-size: 1.6rem; font-weight: 800;}
    .panel p.desc { color: var(--text-muted); margin-bottom: 24px; font-size: 1.05rem; line-height: 1.5; }

    /* Formularios */
    .form-group { margin-bottom: 20px; }
    .form-group label { display: block; font-size: 0.95rem; font-weight: 600; margin-bottom: 8px; color: #1e293b;}
    .btn-calc { width: 100%; background: var(--primary); color: white; border: none; padding: 16px; border-radius: 10px; font-size: 1.1rem; font-weight: bold; cursor: pointer; margin-top: 10px; transition: background 0.2s, transform 0.1s; box-shadow: 0 4px 6px -1px rgba(14, 165, 233, 0.2);}
    .btn-calc:hover { background: var(--primary-dark); }
    .btn-calc:active { transform: scale(0.98); }

    /* Resultados */
    .result-card { margin-top: 30px; background: #f8fafc; border: 2px solid var(--border); border-radius: 12px; padding: 20px; display: none; }
    .result-card.active { display: block; }
    .result-row { display: flex; justify-content: space-between; align-items: center; padding: 16px 0; border-bottom: 1px dashed #cbd5e1; }
    .result-row:last-child { border-bottom: none; }
    .result-label { font-size: 1rem; color: var(--text-main); font-weight: 500;}
    .result-value { font-size: 1.25rem; font-weight: 800; color: #0f172a; }
    
    .concept-tag { background: var(--concept-bg); color: var(--concept-text); padding: 4px 10px; border-radius: 8px; font-size: 0.85rem; font-weight: 700; margin-left: 10px; display: inline-flex; align-items: center; border: 1px solid #bfdbfe;}
    .concept-tag.deduction { background: #fee2e2; color: #991b1b; border-color: #fecaca;}

    /* Tablas */
    table { width: 100%; border-collapse: separate; border-spacing: 0; margin-top: 20px; border-radius: 8px; overflow: hidden; border: 1px solid var(--border); }
    th, td { padding: 12px 16px; text-align: left; border-bottom: 1px solid var(--border); }
    th { background: #f1f5f9; font-weight: 700; color: #334155; font-size: 0.95rem;}
    td { background: white; font-size: 1rem;}
    tr:last-child td { border-bottom: none; }

    /* Sustento Legal */
    .legal-basis { background: #f1f5f9; color: var(--text-muted); font-size: 0.85rem; padding: 12px 16px; border-radius: 8px; margin-top: 24px; border-left: 3px solid #cbd5e1; display: flex; align-items: flex-start; gap: 8px; }
    .legal-basis strong { color: #475569; }

    /* Disclaimer Liquidez */
    .disclaimer-box { background: #fffbeb; border: 1px solid #fde68a; border-left: 5px solid #f59e0b; padding: 16px; border-radius: 8px; margin-top: 20px; }
    .disclaimer-box p { color: #92400e; font-size: 0.95rem; margin: 0; line-height: 1.5; }
    .disclaimer-box strong { color: #b45309; }

  </style>
</head>
<body>

<div class="container">
  <header>
    <h1>Tus Prestaciones, M√°s Claras</h1>
    <p class="subtitle">Herramientas sencillas para conocer exactamente cu√°nto te toca, sin enredos ni palabras complicadas.</p>
  </header>

  <div class="global-search">
    <label for="buscador">üëã ¬°Hola! Para empezar, selecciona tu categor√≠a:</label>
    <div class="autocomplete-wrapper">
      <input type="text" id="buscador" placeholder="Escribe aqu√≠ tu puesto (Ej. Enfermera, M√©dico, Auxiliar...)" autocomplete="off">
    </div>
    
    <div id="user-data" class="user-data-bar">
      <div>Categor√≠a:<br><span id="ud-cat">-</span></div>
      <div>Jornada:<br><span id="ud-jor">-</span> <span style="font-size:0.9rem; font-weight:normal;">hrs</span></div>
      <div>Sueldo Tabular (Cpto. 02):<br><span id="ud-tab">$0.00</span></div>
      <div>
        Ayuda de Renta (Cpto. 011):<br>
        <div style="display:flex; align-items:center;">
          <span style="font-weight:normal; margin-right:4px;">$</span>
          <input type="number" id="ud-renta" value="0" style="width: 120px; padding: 8px; font-weight: bold; color: var(--primary-dark); border-color: #cbd5e1; background: white;" onchange="updateRentaGlobal()">
        </div>
        <span class="hint">Modif√≠calo si conoces el dato exacto.</span>
      </div>
    </div>
  </div>

  <div class="layout">
    <nav class="menu">
      <button class="menu-btn active" onclick="openPanel('p-anticipo', this)">Anticipo de Sueldo</button>
      <button class="menu-btn" onclick="openPanel('p-ahorro', this)">Fondo de Ahorro (Julio)</button>
      <button class="menu-btn" onclick="openPanel('p-extra', this)">Tiempo Extra</button>
      <button class="menu-btn" onclick="openPanel('p-hipo-largo', this)">Hipotecario Largo (30 a√±os)</button>
      <button class="menu-btn" onclick="openPanel('p-hipo-medio', this)">Hipotecario Medio (12 a√±os)</button>
      <button class="menu-btn" onclick="openPanel('p-auto', this)">Cr√©dito para Auto</button>
      <button class="menu-btn" onclick="openPanel('p-aguinaldo', this)">Aguinaldo y Anticipos</button>
    </nav>

    <main>
      
      <div id="p-anticipo" class="panel active">
        <h2>Anticipo de Sueldo</h2>
        <p class="desc">Descubre cu√°nto puedes pedir de adelanto de tu sueldo para salir de un apuro y en cu√°nto te quedar√° el descuento a la quincena. ¬°Recuerda que es con cero intereses!</p>
        
        <div class="form-group">
          <label>¬øCu√°ntos meses necesitas que te adelanten?</label>
          <select id="ant_meses">
            <option value="1">1 Mes (P√°galo en 10 quincenas)</option>
            <option value="2">2 Meses (P√°galo en 20 quincenas)</option>
            <option value="3">3 Meses (P√°galo en 30 quincenas)</option>
            <option value="4">4 Meses (P√°galo en 40 quincenas)</option>
          </select>
        </div>
        <button class="btn-calc" onclick="calcAnticipo()">Ver mi adelanto</button>

        <div id="res_anticipo" class="result-card">
          <div class="result-row">
            <span class="result-label">Te depositar√≠an m√°ximo:</span>
            <span class="result-value" id="ant_monto" style="color: var(--primary-dark);">$0.00</span>
          </div>
          <div class="result-row">
            <span class="result-label">Terminar√≠as de pagarlo en:</span>
            <span class="result-value" id="ant_plazo" style="color: var(--text-main); font-weight:600;">0 Quincenas</span>
          </div>
          <div class="result-row">
            <span class="result-label">Tu descuento quincenal fijo ser√≠a: <span class="concept-tag deduction">Deducci√≥n Temporal</span></span>
            <span class="result-value" style="color: #dc2626;" id="ant_desc">-$0.00</span>
          </div>
        </div>

        <div class="legal-basis">
          üìñ <strong>Fundamento:</strong> Cl√°usula 97 del Contrato Colectivo de Trabajo (CCT).
        </div>
      </div>

      <div id="p-ahorro" class="panel">
        <h2>Fondo de Ahorro (La 2da de Julio)</h2>
        <p class="desc">Calcula ese guardadito anual que cae como anillo al dedo en la segunda quincena de julio.</p>
        
        <div class="form-group">
          <label>¬øCu√°ntos d√≠as laboraste en el √∫ltimo a√±o? (De julio a julio)</label>
          <input type="number" id="aho_dias" value="365" max="365">
          <p style="font-size: 0.85rem; color: var(--text-muted); margin-top: 6px;">Por lo general son los 365 d√≠as. Solo b√°jale si tuviste faltas o licencias sin goce de sueldo.</p>
        </div>
        <button class="btn-calc" onclick="calcAhorro()">Calcular mi fondo</button>

        <div id="res_ahorro" class="result-card">
          <div class="result-row">
            <span class="result-label">D√≠as proporcionales que lograste generar:</span>
            <span class="result-value" id="aho_dias_res" style="font-weight: 600; color: var(--text-main);">0 d√≠as</span>
          </div>
          <div class="result-row" style="background: #f0fdf4; padding: 16px; border-radius: 8px; margin-top: 10px; border: 1px solid #bbf7d0;">
            <span class="result-label" style="color: #166534; font-weight: 700;">Total a recibir (Libre de impuestos): <span class="concept-tag" style="background: #86efac; color: #14532d; border:none;">Concepto 055</span></span>
            <span class="result-value" id="aho_total" style="color: #166534; font-size: 1.5rem;">$0.00</span>
          </div>
        </div>

        <div class="legal-basis">
          üìñ <strong>Fundamento:</strong> Cl√°usula 144 del CCT.
        </div>
      </div>

      <div id="p-extra" class="panel">
        <h2>Pago de Tiempo Extra</h2>
        <p class="desc">Conoce exactamente cu√°nto te pagar√°n por esas horas adicionales que te quedaste apoyando en tu servicio.</p>
        
        <div class="form-group">
          <label>¬øCu√°ntas horas extra laboraste en la quincena?</label>
          <input type="number" id="ext_horas" placeholder="Ej. 4">
        </div>
        <div class="form-group">
          <label>¬øC√≥mo te las van a pagar?</label>
          <select id="ext_factor">
            <option value="2">Al Doble (x2) - Si hiciste hasta 9 horas en la semana</option>
            <option value="3">Al Triple (x3) - M√°s de 9 horas o si trabajaste en tu descanso</option>
            <option value="4">Al Cu√°druple (x4) - Si trabajaste en d√≠a festivo obligatorio y adem√°s era tu descanso</option>
          </select>
        </div>
        <button class="btn-calc" onclick="calcExtra()">Calcular mis horas</button>

        <div id="res_extra" class="result-card">
          <div class="result-row">
            <span class="result-label">Tu hora de sueldo base vale:</span>
            <span class="result-value" id="ext_base" style="font-weight: 600; color: var(--text-muted);">$0.00</span>
          </div>
          <div class="result-row">
            <span class="result-label" style="font-weight: 700;">Total a recibir en efectivo: <span class="concept-tag">Concepto 037</span></span>
            <span class="result-value" id="ext_total" style="color: var(--primary-dark);">$0.00</span>
          </div>
        </div>

        <div class="legal-basis">
          üìñ <strong>Fundamento:</strong> Cl√°usulas 32 y 33 del CCT, y Normativa de Conceptos de Pago (Cpto 037).
        </div>
      </div>

      <div id="p-hipo-largo" class="panel">
        <h2>Cr√©dito Hipotecario a Largo Plazo</h2>
        <p class="desc">Mira cu√°nto te presta el Instituto para comprar, construir o reparar tu casa, y en cu√°nto te quedar√≠a el descuento a 30 a√±os.</p>
        
        <div class="form-group">
          <label>¬øQu√© tan libre de deudas est√° tu tarjet√≥n de pago?</label>
          <select id="hl_liq">
            <option value="90">Mi tarjet√≥n est√° limpio y tengo buena capacidad</option>
            <option value="75">Tengo algunos descuentos o pr√©stamos activos</option>
          </select>
        </div>
        <button class="btn-calc" onclick="calcHipoLargo()">Simular mi Cr√©dito a 30 a√±os</button>

        <div id="res_hipo_largo" class="result-card">
          <div class="result-row">
            <span class="result-label">Tu Monto M√°ximo Ideal ser√≠a:</span>
            <span class="result-value" id="hl_max" style="color: var(--primary-dark);">$0.00</span>
          </div>
          <div class="result-row">
            <span class="result-label">Tu descuento quincenal (Fijo por 30 a√±os): <span class="concept-tag deduction">Concepto 130</span></span>
            <span class="result-value" style="color: #dc2626;" id="hl_desc">-$0.00</span>
          </div>
        </div>

        <div class="disclaimer-box">
          <p>üí° <strong>Nota sobre tu Liquidez:</strong> Los montos mostrados son el m√°ximo al que tienes derecho por tu categor√≠a. Para que el IMSS te autorice estas cantidades exactas, revisar√°n tu Tarjet√≥n de Pago para asegurarse de que, despu√©s de cobrarte este nuevo pr√©stamo, te siga quedando dinero suficiente para tus gastos b√°sicos (al menos 15 d√≠as de salario m√≠nimo libre). Si tienes muchos descuentos activos, podr√≠an pedirte que liquides los menores antes de darte uno nuevo.</p>
        </div>

        <div class="legal-basis">
          üìñ <strong>Fundamento:</strong> Cl√°usula 81 del CCT y Art√≠culos 4 y 6 del Reglamento de Pr√©stamos para el Fomento de la Habitaci√≥n.
        </div>
      </div>

      <div id="p-hipo-medio" class="panel">
        <h2>Cr√©dito Hipotecario a Mediano Plazo</h2>
        <p class="desc">Una excelente opci√≥n si quieres un pr√©stamo para tu vivienda que liquides mucho m√°s r√°pido (m√°ximo en 12 a√±os).</p>
        
        <button class="btn-calc" onclick="calcHipoMedio()">Simular mi Cr√©dito a 12 a√±os</button>

        <div id="res_hipo_medio" class="result-card">
          <div class="result-row">
            <span class="result-label">Tu Monto M√°ximo Ideal (35 meses):</span>
            <span class="result-value" id="hm_max" style="color: var(--primary-dark);">$0.00</span>
          </div>
          <div class="result-row">
            <span class="result-label">Tu descuento quincenal (Fijo por 12 a√±os): <span class="concept-tag deduction">Concepto 136</span></span>
            <span class="result-value" style="color: #dc2626;" id="hm_desc">-$0.00</span>
          </div>
        </div>

        <div class="disclaimer-box">
          <p>üí° <strong>Nota sobre tu Liquidez:</strong> Los montos mostrados son el m√°ximo al que tienes derecho por tu categor√≠a. Para que el IMSS te autorice estas cantidades exactas, revisar√°n tu Tarjet√≥n de Pago para asegurarse de que, despu√©s de cobrarte este nuevo pr√©stamo, te siga quedando dinero suficiente para tus gastos b√°sicos (al menos 15 d√≠as de salario m√≠nimo libre). Si tienes muchos descuentos activos, podr√≠an pedirte que liquides los menores antes de darte uno nuevo.</p>
        </div>

        <div class="legal-basis">
          üìñ <strong>Fundamento:</strong> Cl√°usula 81 del CCT y Art√≠culos 25 y 27 del Reglamento de Pr√©stamos para el Fomento de la Habitaci√≥n.
        </div>
      </div>

      <div id="p-auto" class="panel">
        <h2>Cr√©dito de Autom√≥vil</h2>
        <p class="desc">Descubre de cu√°nto es tu cr√©dito para estrenar auto, pag√°ndolo c√≥modamente en 5 a√±os (120 quincenas).</p>
        
        <button class="btn-calc" onclick="calcAuto()">Simular mi Cr√©dito Automotriz</button>

        <div id="res_auto" class="result-card">
          <div class="result-row" style="background: #e0f2fe; padding: 16px; border-radius: 8px; border: 1px solid #bae6fd;">
            <span class="result-label" style="font-weight: 700; color: #0369a1;">Monto M√°ximo Ideal para tu auto:</span>
            <span class="result-value" id="au_max" style="color: #0284c7; font-size: 1.5rem;">$0.00</span>
          </div>
          <div style="margin-top: 24px;">
            <p style="font-size: 1.05rem; font-weight: 700; color: #0f172a; margin-bottom: 8px;">As√≠ ir√≠a bajando tu descuento por a√±o: <span class="concept-tag deduction">Concepto 134</span></p>
            <table>
              <tr><th>A√±o de pago</th><th>Descuento Quincenal</th></tr>
              <tr><td>A√±o 1</td><td id="au_y1" style="color: #dc2626; font-weight: bold;">$0.00</td></tr>
              <tr><td>A√±o 2</td><td id="au_y2" style="color: #dc2626; font-weight: bold;">$0.00</td></tr>
              <tr><td>A√±o 3</td><td id="au_y3" style="color: #dc2626; font-weight: bold;">$0.00</td></tr>
              <tr><td>A√±o 4</td><td id="au_y4" style="color: #dc2626; font-weight: bold;">$0.00</td></tr>
              <tr><td>A√±o 5</td><td id="au_y5" style="color: #dc2626; font-weight: bold;">$0.00</td></tr>
            </table>
          </div>
        </div>

        <div class="disclaimer-box">
          <p>üí° <strong>Nota sobre tu Liquidez:</strong> Los montos mostrados son el m√°ximo al que tienes derecho por tu categor√≠a. Para que el IMSS te autorice estas cantidades exactas, revisar√°n tu Tarjet√≥n de Pago para asegurarse de que, despu√©s de cobrarte este nuevo pr√©stamo, te siga quedando dinero suficiente para tus gastos b√°sicos (al menos 15 d√≠as de salario m√≠nimo libre). Si tienes muchos descuentos activos, podr√≠an pedirte que liquides los menores antes de darte uno nuevo.</p>
        </div>

        <div class="legal-basis">
          üìñ <strong>Fundamento:</strong> Cl√°usula 146 del CCT.
        </div>
      </div>

      <div id="p-aguinaldo" class="panel">
        <h2>Aguinaldo</h2>
        <p class="desc">El aguinaldo total equivale a 3 meses de sueldo. Conoce tus adelantos y el saldo libre de impuestos que recibir√°s en diciembre.</p>
        
        <div class="form-group">
          <label>¬øPediste que te adelantaran un mes de aguinaldo en Agosto?</label>
          <select id="ag_agosto">
            <option value="no">No, prefer√≠ esperarme</option>
            <option value="si">S√≠, ped√≠ mi mes de anticipo</option>
          </select>
        </div>
        <button class="btn-calc" onclick="calcAguinaldo()">Calcular mi Aguinaldo</button>

        <div id="res_aguinaldo" class="result-card">
          <div class="result-row" style="background: #f1f5f9; padding: 12px; border-radius: 8px; margin-bottom: 8px;">
            <span class="result-label" style="font-weight: 700;">Lo que valen tus 3 meses completos:</span>
            <span class="result-value" id="ag_total" style="color: var(--text-muted);">$0.00</span>
          </div>
          <div class="result-row">
            <span class="result-label">Lo que te adelantaron en Enero: <span class="concept-tag">Cpto. 047</span></span>
            <span class="result-value" id="ag_enero" style="color: var(--text-muted);">$0.00</span>
          </div>
          <div class="result-row" id="row_agosto" style="display: none;">
            <span class="result-label">Lo que te adelantaron en Agosto:</span>
            <span class="result-value" id="ag_ago_val" style="color: var(--text-muted);">$0.00</span>
          </div>
          <div class="result-row" style="background: #f0fdf4; padding: 16px; border-radius: 8px; margin-top: 16px; border: 1px solid #bbf7d0;">
            <span class="result-label" style="color: #166534; font-weight: 800;">Saldo a recibir en Diciembre: <span class="concept-tag" style="background: #86efac; color: #14532d; border:none;">Cpto. 049</span></span>
            <span class="result-value" id="ag_dic" style="color: #166534; font-size: 1.5rem;">$0.00</span>
          </div>
        </div>

        <div class="legal-basis">
          üìñ <strong>Fundamento:</strong> Cl√°usula 107 del CCT.
        </div>
      </div>

    </main>
  </div>
</div>

<script>
  // Utilidades y Variables
  const money = n => n.toLocaleString('es-MX', {style:'currency', currency:'MXN'});
  let userData = { tabular: 0, jornada: 0, renta: 0, categoria: '' };
  
  // Base de datos (Muestra representativa)
  const sueldosDB = [
    {"cat": "M√©dico Familiar", "jor": 8.0, "sm": 12844.2},
    {"cat": "M√©dico General", "jor": 8.0, "sm": 9751.8},
    {"cat": "Enfermera Especialista", "jor": 8.0, "sm": 8415.48},
    {"cat": "Enfermera General", "jor": 8.0, "sm": 7381.12},
    {"cat": "Mensajero", "jor": 8.0, "sm": 4868.04},
    {"cat": "Mensajero", "jor": 6.5, "sm": 3955.4},
    {"cat": "Auxiliar Universal de Oficinas", "jor": 8.0, "sm": 5841.44},
    {"cat": "Auxiliar Universal de Oficinas", "jor": 6.5, "sm": 4746.16},
    {"cat": "Chofer", "jor": 8.0, "sm": 5738.04},
    {"cat": "Intendente", "jor": 8.0, "sm": 6565.76},
    {"cat": "Cajero A", "jor": 8.0, "sm": 7656.68},
    {"cat": "Asistente M√©dica", "jor": 8.0, "sm": 6108.68},
    {"cat": "Trabajadora Social", "jor": 8.0, "sm": 7258.16}
  ];

  // Buscador
  const searchInput = document.getElementById('buscador');
  searchInput.addEventListener('input', function() {
    closeLists();
    if (!this.value) return;
    
    let a = document.createElement("DIV");
    a.setAttribute("class", "autocomplete-items");
    this.parentNode.appendChild(a);
    
    let matches = sueldosDB.filter(i => i.cat.toLowerCase().includes(this.value.toLowerCase())).slice(0, 10);
    
    matches.forEach(item => {
      let b = document.createElement("DIV");
      b.innerHTML = `<strong>${item.cat}</strong> <span style="color:var(--text-muted); font-size:0.85rem;">(${item.jor} hrs)</span> - <span style="color:var(--primary-dark); font-weight:bold;">${money(item.sm)}</span>`;
      b.addEventListener("click", function() {
        seleccionarPuesto(item);
        closeLists();
      });
      a.appendChild(b);
    });
  });

  function closeLists() {
    let x = document.getElementsByClassName("autocomplete-items");
    for (let i = 0; i < x.length; i++) x[i].parentNode.removeChild(x[i]);
  }
  document.addEventListener("click", e => closeLists());

  // Llenado de Datos
  function seleccionarPuesto(item) {
    searchInput.value = `${item.cat} (${item.jor} hrs)`;
    userData.tabular = item.sm;
    userData.jornada = item.jor;
    userData.categoria = item.cat;
    userData.renta = parseFloat(document.getElementById('ud-renta').value) || 0;

    document.getElementById('ud-cat').innerText = item.cat;
    document.getElementById('ud-jor').innerText = item.jor;
    document.getElementById('ud-tab').innerText = money(item.sm);
    
    document.getElementById('user-data').classList.add('active');
  }

  function updateRentaGlobal() {
    userData.renta = parseFloat(document.getElementById('ud-renta').value) || 0;
  }

  // Navegaci√≥n
  function openPanel(panelId, btn) {
    document.querySelectorAll('.panel').forEach(p => p.classList.remove('active'));
    document.querySelectorAll('.menu-btn').forEach(b => b.classList.remove('active'));
    document.getElementById(panelId).classList.add('active');
    btn.classList.add('active');
  }

  function validarDatos() {
    if (userData.tabular === 0) {
      alert("¬°Hola! Por favor busca y selecciona primero tu categor√≠a en el buscador de arriba.");
      searchInput.focus();
      return false;
    }
    return true;
  }

  // 1. Anticipo
  function calcAnticipo() {
    if (!validarDatos()) return;
    const sueldo = userData.tabular + userData.renta;
    const meses = parseInt(document.getElementById('ant_meses').value);
    
    const monto = sueldo * meses;
    const plazo = meses * 10;
    const desc = monto / plazo;

    document.getElementById('ant_monto').innerText = money(monto);
    document.getElementById('ant_plazo').innerText = plazo + " Quincenas";
    document.getElementById('ant_desc').innerText = "-" + money(desc);
    document.getElementById('res_anticipo').classList.add('active');
  }

  // 2. Fondo Ahorro
  function calcAhorro() {
    if (!validarDatos()) return;
    const diasLab = parseFloat(document.getElementById('aho_dias').value) || 0;
    
    const salarioDiario = userData.tabular / 30;
    const diasPagar = 46 * (diasLab / 365);
    const total = salarioDiario * diasPagar;

    document.getElementById('aho_dias_res').innerText = diasPagar.toFixed(2) + " d√≠as";
    document.getElementById('aho_total').innerText = money(total);
    document.getElementById('res_ahorro').classList.add('active');
  }

  // 3. Tiempo Extra
  function calcExtra() {
    if (!validarDatos()) return;
    const horas = parseFloat(document.getElementById('ext_horas').value) || 0;
    const factor = parseInt(document.getElementById('ext_factor').value);
    
    const costoHora = (userData.tabular + userData.renta) / 30 / userData.jornada;
    const total = costoHora * factor * horas;

    document.getElementById('ext_base').innerText = money(costoHora);
    document.getElementById('ext_total').innerText = money(total);
    document.getElementById('res_extra').classList.add('active');
  }

  // Regla Hipotecaria
  function getPorcentajeHipotecario() {
    return userData.tabular <= 4868.04 ? 0.25 : 0.30;
  }

  // 4. Hipotecario Largo
  function calcHipoLargo() {
    if (!validarDatos()) return;
    const liq = parseInt(document.getElementById('hl_liq').value); 
    
    const smi = (userData.tabular + userData.renta) * 1.20;
    const max = smi * liq;
    const porcentaje = getPorcentajeHipotecario();
    const desc = (smi * porcentaje) / 2;

    document.getElementById('hl_max').innerText = money(max);
    document.getElementById('hl_desc').innerText = "-" + money(desc);
    document.getElementById('res_hipo_largo').classList.add('active');
  }

  // 5. Hipotecario Medio
  function calcHipoMedio() {
    if (!validarDatos()) return;
    
    const smi = (userData.tabular + userData.renta) * 1.20;
    const max = smi * 35;
    const porcentaje = getPorcentajeHipotecario();
    const desc = (smi * porcentaje) / 2;

    document.getElementById('hm_max').innerText = money(max);
    document.getElementById('hm_desc').innerText = "-" + money(desc);
    document.getElementById('res_hipo_medio').classList.add('active');
  }

  // 6. Auto
  function calcAuto() {
    if (!validarDatos()) return;
    
    const smi = (userData.tabular + userData.renta) * 1.20;
    const max = smi * 24;

    document.getElementById('au_max').innerText = money(max);
    document.getElementById('au_y1').innerText = "-" + money((smi * 0.40) / 2);
    document.getElementById('au_y2').innerText = "-" + money((smi * 0.39) / 2);
    document.getElementById('au_y3').innerText = "-" + money((smi * 0.38) / 2);
    document.getElementById('au_y4').innerText = "-" + money((smi * 0.37) / 2);
    document.getElementById('au_y5').innerText = "-" + money((smi * 0.36) / 2);
    
    document.getElementById('res_auto').classList.add('active');
  }

  // 7. Aguinaldo
  function calcAguinaldo() {
    if (!validarDatos()) return;
    const pideAgosto = document.getElementById('ag_agosto').value === 'si';
    
    const sueldo = userData.tabular + userData.renta;
    const total = sueldo * 3;
    const enero = sueldo * 0.5;
    const agosto = pideAgosto ? (sueldo * 1) : 0;
    const dic = total - enero - agosto;

    document.getElementById('ag_total').innerText = money(total);
    document.getElementById('ag_enero').innerText = money(enero);
    
    if (pideAgosto) {
      document.getElementById('row_agosto').style.display = 'flex';
      document.getElementById('ag_ago_val').innerText = money(agosto);
    } else {
      document.getElementById('row_agosto').style.display = 'none';
    }
    
    document.getElementById('ag_dic').innerText = money(dic);
    document.getElementById('res_aguinaldo').classList.add('active');
  }
</script>
</body>
</html>
